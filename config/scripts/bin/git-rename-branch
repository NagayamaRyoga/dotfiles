#!/usr/bin/env bash
set -u
git rev-parse 2>/dev/null || exit 1

file="$(mktemp)"

old_branch="$(git branch --show-current | \command tee "$file")"
"${EDITOR}" "$file"

new_branch="$(\command cat "$file")"
\command rm "$file"

git branch -m "$old_branch" "$new_branch"
